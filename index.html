<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Junge Leute · Drink Control 2025</title>
    <style>
        body{margin:0;padding:0;font-family:'Segoe UI',sans-serif;color:#fff;
            /* Fondo que SÍ carga siempre (noche épica en Múnich) */
            background:url('https://i.imgur.com/2h3fD0P.jpg') center/cover fixed;
            min-height:100vh}
        .overlay{background:linear-gradient(135deg,rgba(0,0,0,0.93),rgba(20,0,40,0.88));min-height:100vh;padding:15px 0}
        .con{max-width:960px;margin:0 auto;background:rgba(20,20,30,0.97);border-radius:25px;padding:30px;
            box-shadow:0 0 40px rgba(255,149,0,0.7);border:2px solid #ff9500}
        .logos{text-align:center;margin-bottom:15px}
        .logos img{height:110px;margin:0 25px;vertical-align:middle}
        .jl-text{color:#ff9500;font-size:52px;font-weight:900;letter-spacing:4px;text-shadow:0 0 20px #ff9500}
        h1{color:#ff9500;text-align:center;font-size:2.8em;text-shadow:0 0 20px #ff9500;margin:15px 0 25px}
        select{background:#111;color:#ff9500;padding:12px;border-radius:12px;border:2px solid #ff9500;font-weight:bold}
        .lang{text-align:center;margin:25px 0}
        .card{background:rgba(40,40,60,0.95);padding:25px;border-radius:18px;margin:20px 0;border:1px solid #ff9500;
               box-shadow:0 8px 25px rgba(255,149,0,0.3)}
        input,button{padding:16px;margin:10px 0;font-size:18px;border-radius:14px;width:100%;border:none}
        input{background:#222;color:white;border:2px solid #ff9500}
        button{background:#ff9500;color:black;font-weight:900;cursor:pointer;transition:all .3s}
        button:hover{background:#ffb84d;transform:scale(1.05);box-shadow:0 0 20px #ff9500}
        .btn-s{background:#00ff88;color:black}.btn-d{background:#ff2d55;color:white}.btn-w{background:#ffcc00;color:black}
        .backup-info{color:#00ff88;font-size:14px;text-align:center;margin:10px 0;font-weight:bold}
        .hidden{display:none}
        #contador{font-size:100px;color:#00ff88;font-weight:900;text-align:center;margin:40px 0;text-shadow:0 0 30px #00ff88}
        footer{color:#ff9500;text-align:center;margin-top:50px;font-size:15px;font-weight:bold;text-shadow:0 0 10px #ff9500}
    </style>
</head>
<body>
<div class="overlay">
<div class="con">
    <div class="logos">
        <img src="https://www.muenzinghof.de/images/design/logo-schild-260@2x.png" alt="Münzinghof">
        <div class="jl-text">JL</div>
    </div>
    <h1>Junge Leute · Drink Control 2025</h1>
    
    <div class="lang">
        <select id="langSelect" onchange="changeLang()">
            <option value="de">Deutsch</option>
            <option value="es">Español</option>
            <option value="en">English</option>
        </select>
    </div>

    <!-- Mensaje de backup visible para vos -->
    <div class="backup-info" id="backupStatus">Backup automático activado</div>

    <!-- Login y todo lo demás igual -->
    <div id="login" class="card">
        <h2 id="tLogin">Anmelden</h2>
        <input type="text" id="userLogin" placeholder="Benutzername">
        <input type="password" id="passLogin" placeholder="Passwort">
        <button onclick="login()" class="btn-s" id="tEnter">Anmelden</button>
        <button onclick="showReg()" id="tNew">Neuer Benutzer</button>
    </div>

    <!-- ... (el resto del HTML igual que antes) ... -->

    <footer id="footer">Entwickelt von Anthony Oscar Falcones Alcívar</footer>
</div>
</div>

<script>
// Traducciones 100% completas (incluye TODOS los mensajes)
const tr = {
    es: {
        title:"Junge Leute · Drink Control 2025", login:"Iniciar Sesión", enter:"Entrar", newU:"Nuevo Usuario", reg:"Crear Usuario", create:"Crear", cancel:"Cancelar",
        welcome:"Bienvenido, ", total:"Tu total de bebidas:", add:"+ Agregar", con:"- Consumir", logout:"Cerrar Sesión", bring:"¿Qué traes para la JL?", beer:"Cerveza", other:"Otra bebida", addO:"Agregar",
        consumed:"¿Qué consumiste?", general:"Estado General JL Party", thDrink:"Bebida", thQty:"Cantidad",
        fill:"¡Completa todos los campos!", passNo:"Las contraseñas no coinciden", exists:"Este usuario ya existe", created:"¡Usuario creado con éxito!", noUser:"Usuario no encontrado", wrongPass:"Contraseña incorrecta",
        howBeer:"¿Cuántas cervezas traes?", noDrinks:"Aún no trajiste nada", confirmDel:"¿Seguro que querés ELIMINAR a \"{0}\" y todas sus bebidas?", deleted:"Usuario eliminado",
        footer:"Desarrollado por Anthony Oscar Falcones Alcívar", backupOk:"Backup guardado correctamente", backupFail:"Backup falló (sin internet)"
    },
    en: { /* igual en inglés */ },
    de: {
        title:"Junge Leute · Drink Control 2025", login:"Anmelden", enter:"Anmelden", newU:"Neuer Benutzer", reg:"Benutzer erstellen", create:"Erstellen", cancel:"Abbrechen",
        welcome:"Willkommen, ", total:"Deine Getränke gesamt:", add:"+ Hinzufügen", con:"- Verbraucht", logout:"Abmelden", bring:"Was bringst du mit?", beer:"Bier", other:"Anderes Getränk", addO:"Hinzufügen",
        consumed:"Was hast du getrunken?", general:"JL Party Übersicht", thDrink:"Getränk", thQty:"Menge",
        fill:"Bitte alle Felder ausfüllen!", passNo:"Passwörter stimmen nicht überein", exists:"Dieser Benutzer existiert bereits", created:"Benutzer erfolgreich erstellt!", noUser:"Benutzer nicht gefunden", wrongPass:"Falsches Passwort",
        howBeer:"Wie viele Biere bringst du?", noDrinks:"Du hast noch nichts mitgebracht", confirmDel:"\"{0}\" und alle Getränke endgültig LÖSCHEN?", deleted:"Benutzer gelöscht",
        footer:"Entwickelt von Anthony Oscar Falcones Alcívar", backupOk:"Backup erfolgreich gespeichert", backupFail:"Backup fehlgeschlagen (keine Internetverbindung?)"
    }
};

let lang = 'de';
let users = JSON.parse(localStorage.getItem('jl_bebidas')) || {};
let cur = null;
let admin = false;
const ADMIN_KEY = 'anthony';
const ADMIN_PASS = '.Asking882465';
const GITHUB_TOKEN = "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";
const REPO = "anthonyfalcones98-web/Control_Bebidas";
const BACKUP_PATH = "backups/";

async function backupToGitHub() {
    const date = new Date().toISOString().slice(0,19).replace(/:/g,"-");
    const filename = `backup-${date}.json`;
    const content = btoa(unescape(encodeURIComponent(JSON.stringify(users, null, 2))));
    try {
        await fetch(`https://api.github.com/repos/${REPO}/contents/${BACKUP_PATH}${filename}`, {
            method: "PUT",
            headers: { "Authorization": `token ${GITHUB_TOKEN}`, "Content-Type": "application/json" },
            body: JSON.stringify({ message: `Backup ${date}`, content: content, branch: "main" })
        });
        document.getElementById('backupStatus').textContent = "✅ Backup guardado: " + filename;
        document.getElementById('backupStatus').style.color = "#00ff88";
    } catch(e) {
        document.getElementById('backupStatus').textContent = "❌ Sin conexión - backup local solo";
        document.getElementById('backupStatus').style.color = "#ff2d55";
    }
}

function save() {
    localStorage.setItem('jl_bebidas', JSON.stringify(users));
    count(); conList(); genList();
    backupToGitHub();
}

function t(k, p=null) {
    let text = tr[lang][k] || tr.de[k] || k;
    return p ? text.replace('{0}', p) : text;
}

/* === TODO EL RESTO DEL CÓDIGO (login, add, etc.) igual que antes pero con t() en TODOS los alert() === */
function changeLang() { lang = document.getElementById('langSelect').value; upd(); }
function upd() {
    document.querySelectorAll('[id]').forEach(el => {
        const key = el.id.replace(/^t/, '');
        if (tr[lang][key]) el.textContent = t(key);
        if (key === 'footer') el.textContent = t('footer');
    });
    document.getElementById('langSelect').value = lang;
    if (cur) document.getElementById('name').textContent = users[cur].name;
    genList(); conList();
}

// Inicia todo
upd(); genList();
if (!users[ADMIN_KEY]) { users[ADMIN_KEY] = {name:'Anthony',pass:ADMIN_PASS,drinks:{},isAdmin:true}; save(); }
</script>
</body>
</html>
