<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Junge Leute · Drink Control</title>
    <style>
        body{margin:0;padding:0;font-family:'Segoe UI',sans-serif;color:#fff;
            background:url('https://tse3.mm.bing.net/th/id/OIP.DFY7HQG-QHJZVBoTwn6U-QHaEO?w=1920&h=1080&rs=1&pid=ImgDetMain') center/cover fixed;
            min-height:100vh}
        .overlay{background:linear-gradient(135deg,rgba(0,0,0,0.93),rgba(20,0,40,0.88));min-height:100vh;padding:20px 0}
        .con{max-width:960px;margin:0 auto;background:rgba(20,20,30,0.97);border-radius:25px;padding:30px;
            box-shadow:0 0 40px rgba(255,149,0,0.7);border:2px solid #ff9500}
        .logos{text-align:center;margin-bottom:15px}
        .logos img{height:110px;margin:0 25px;vertical-align:middle}
        .jl-text{color:#ff9500;font-size:52px;font-weight:900;letter-spacing:4px;text-shadow:0 0 20px #ff9500}
        h1{color:#ff9500;text-align:center;font-size:2.8em;text-shadow:0 0 20px #ff9500;margin:15px 0 25px}
        select{background:#111;color:#ff9500;padding:12px;border-radius:12px;border:2px solid #ff9500;font-weight:bold}
        .lang{text-align:center;margin:25px 0}
        .card{background:rgba(40,40,60,0.95);padding:25px;border-radius:18px;margin:20px 0;border:1px solid #ff9500;
               box-shadow:0 8px 25px rgba(255,149,0,0.3)}
        input,button{padding:16px;margin:10px 0;font-size:18px;border-radius:14px;width:100%;border:none}
        input{background:#222;color:white;border:2px solid #ff9500}
        button{background:#ff9500;color:black;font-weight:900;cursor:pointer;transition:all .3s}
        button:hover{background:#ffb84d;transform:scale(1.05);box-shadow:0 0 20px #ff9500}
        .btn-s{background:#00ff88;color:black}.btn-d{background:#ff2d55;color:white}.btn-w{background:#ffcc00;color:black}
        .hidden{display:none}
        #contador{font-size:100px;color:#00ff88;font-weight:900;text-align:center;margin:40px 0;
                   text-shadow:0 0 30px #00ff88;letter-spacing:3px}
        .drink{background:#222;padding:18px;border-radius:14px;margin:12px 0;display:flex;
               justify-content:space-between;align-items:center;border-left:6px solid #00ff88}
        table{width:100%;border-collapse:collapse;margin-top:15px}
        th,td{padding:12px;text-align:left;border-bottom:1px solid #555}
        th{background:#ff9500;color:black;font-weight:bold}
        .backup-status{color:#00ff88;text-align:center;font-weight:bold;margin:10px 0;font-size:14px}
        footer{color:#ff9500;text-align:center;margin-top:50px;font-weight:bold;text-shadow:0 0 10px #ff9500}
    </style>
</head>
<body>
<div class="overlay">
<div class="con">
    <div class="logos">
        <img src="https://www.muenzinghof.de/images/design/logo-schild-260@2x.png" alt="Münzinghof">
        <div class="jl-text">JL</div>
    </div>
    <h1>Junge Leute · Drink Control</h1>
    
    <div class="lang">
        <select id="langSelect" onchange="changeLang()">
            <option value="de">Deutsch</option>
            <option value="es">Español</option>
            <option value="en">English</option>
        </select>
    </div>

    <div class="backup-status" id="backupStatus">Backup automático activado</div>

    <!-- LOGIN -->
    <div id="login" class="card">
        <h2 data-tr="login">Anmelden</h2>
        <input type="text" id="userLogin" data-ph="phUser">
        <input type="password" id="passLogin" data-ph="phPass">
        <button onclick="login()" class="btn-s" data-tr="enter">Anmelden</button>
        <button onclick="showReg()" data-tr="newU">Neuer Benutzer</button>
    </div>

    <!-- REGISTRO -->
    <div id="register" class="card hidden">
        <h2 data-tr="reg">Benutzer erstellen</h2>
        <input type="text" id="newUser" data-ph="phName">
        <input type="password" id="p1" data-ph="phPass">
        <input type="password" id="p2" data-ph="phRepeat">
        <button onclick="reg()" class="btn-s" data-tr="create">Erstellen</button>
        <button onclick="back()" data-tr="cancel">Abbrechen</button>
    </div>

    <!-- PANEL -->
    <div id="panel" class="hidden">
        <h2 data-tr="welcome">Willkommen, <span id="name"></spam></h2>
        <div style="text-align:center">
            <h3 data-tr="total">Deine Getränke gesamt:</h3>
            <div id="contador">0</div>
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin:40px 0">
            <button onclick="addMode()" class="btn-s" style="font-size:26px;padding:28px" data-tr="add">+ Hinzufügen</button>
            <button onclick="conMode()" class="btn-d" style="font-size:26px;padding:28px" data-tr="con">- Verbraucht</button>
        </div>
        <button onclick="logout()" style="width:100%;padding:20px" data-tr="logout">Abmelden</button>

        <div id="addSec" class="card hidden">
            <h3 data-tr="bring">Was bringst du mit?</h3>
            <button onclick="addBeer()" class="btn-w" style="font-size:22px;padding:22px" data-tr="beer">Bier</button>
            <button onclick="showOther()" data-tr="other">Anderes Getränk</button>
            <div id="other" class="hidden" style="margin-top:15px">
                <input type="text" id="oName" data-ph="phOther">
                <input type="number" id="oQty" value="1" min="1">
                <button onclick="addO()" class="btn-s" data-tr="addO">Hinzufügen</button>
            </div>
        </div>

        <div id="conSec" class="card hidden">
            <h3 data-tr="consumed">Was hast du getrunken?</h3>
            <div id="list"></div>
        </div>
    </div>

    <div class="card" style="margin-top:40px">
        <h2 data-tr="general">JL Party Übersicht</h2>
        <div id="general"></div>
    </div>

    <footer data-tr="footer">Entwickelt von Anthony Oscar Falcones Alcívar</footer>
</div>
</div>

<script>
// TRADUCCIONES
const translations = {
    es: {login:"Iniciar Sesión",enter:"Entrar",newU:"Nuevo Usuario",reg:"Crear Usuario",create:"Crear",cancel:"Cancelar",welcome:"Bienvenido, ",total:"Tu total de bebidas:",add:"+ Agregar",con:"- Consumir",logout:"Cerrar Sesión",bring:"¿Qué traes para la JL?",beer:"Cerveza",other:"Otra bebida",addO:"Agregar",consumed:"¿Qué consumiste?",general:"Resumen JL Party",fill:"¡Completa todos los campos!",passNo:"Las contraseñas no coinciden",exists:"Este usuario ya existe",created:"¡Usuario creado!",noUser:"Usuario no encontrado",wrongPass:"Contraseña incorrecta",howBeer:"¿Cuántas cervezas traes?",noDrinks:"Aún no trajiste nada",footer:"Desarrollado por Anthony Oscar Falcones Alcívar",backupStatus:"Backup automático activado",phUser:"Usuario",phPass:"Contraseña",phName:"Tu nombre",phRepeat:"Repetir contraseña",phOther:"ej. Jägermeister, Fernet",thDrink:"Bebida",thQty:"Cantidad"},
    en: {login:"Login",enter:"Login",newU:"New User",reg:"Create User",create:"Create",cancel:"Cancel",welcome:"Welcome, ",total:"Your total drinks:",add:"+ Add",con:"- Consume",logout:"Logout",bring:"What are you bringing?",beer:"Beer",other:"Other drink",addO:"Add",consumed:"What did you drink?",general:"JL Party Summary",fill:"Fill all fields!",passNo:"Passwords don't match",exists:"User already exists",created:"User created!",noUser:"User not found",wrongPass:"Wrong password",howBeer:"How many beers?",noDrinks:"You haven't brought anything yet",footer:"Developed by Anthony Oscar Falcones Alcívar",backupStatus:"Auto backup enabled",phUser:"Username",phPass:"Password",phName:"Your name",phRepeat:"Repeat password",phOther:"e.g. Jägermeister, Fernet",thDrink:"Drink",thQty:"Quantity"},
    de: {login:"Anmelden",enter:"Anmelden",newU:"Neuer Benutzer",reg:"Benutzer erstellen",create:"Erstellen",cancel:"Abbrechen",welcome:"Willkommen, ",total:"Deine Getränke gesamt:",add:"+ Hinzufügen",con:"- Verbraucht",logout:"Abmelden",bring:"Was bringst du mit?",beer:"Bier",other:"Anderes Getränk",addO:"Hinzufügen",consumed:"Was hast du getrunken?",general:"JL Party Übersicht",fill:"Bitte alle Felder ausfüllen!",passNo:"Passwörter stimmen nicht überein",exists:"Dieser Benutzer existiert bereits",created:"Benutzer erstellt!",noUser:"Benutzer nicht gefunden",wrongPass:"Falsches Passwort",howBeer:"Wie viele Biere bringst du?",noDrinks:"Du hast noch nichts mitgebracht",footer:"Entwickelt von Anthony Oscar Falcones Alcívar",backupStatus:"Backup automatisch aktiviert",phUser:"Benutzername",phPass:"Passwort",phName:"Dein Name",phRepeat:"Passwort wiederholen",phOther:"z.B. Jägermeister, Fernet",thDrink:"Getränk",thQty:"Menge"}
};

let lang = 'de';
let users = JSON.parse(localStorage.getItem('jl_bebidas') || '{}');
let cur = null;

function _(key) { return translations[lang][key] || key; }

function changeLang() {
    lang = document.getElementById('langSelect').value;

    // Traducir todos los textos con data-tr
    document.querySelectorAll('[data-tr]').forEach(el => {
        const key = el.getAttribute('data-tr');
        el.innerHTML = _(key).replace(', <span', ', <span');
    });

    // Traducir placeholders
    document.querySelectorAll('[data-ph]').forEach(el => {
        const key = el.getAttribute('data-ph');
        el.placeholder = _(key);
    });

    // Textos especiales
    document.getElementById('backupStatus').textContent = _( 'backupStatus' );

    // Tablas
    document.querySelectorAll('th').forEach(th => {
        if (th.textContent === 'Getränk' || th.textContent === 'Drink' || th.textContent === 'Bebida') th.textContent = _('thDrink');
        if (th.textContent === 'Menge' || th.textContent === 'Quantity' || th.textContent === 'Cantidad') th.textContent = _('thQty');
    });

    // Refrescar listas si estás logueado
    if (cur) { document.getElementById('name').textContent = users[cur].name; count(); conList(); genList(); }
}

// === FUNCIONES ===
function login() {
    const u = document.getElementById('userLogin').value.trim().toLowerCase();
    const p = document.getElementById('passLogin').value;
    if (!u || !p) return alert(_('fill'));
    if (!users[u]) return alert(_('noUser'));
    if (users[u].pass !== p) return alert(_('wrongPass'));
    cur = u;
    document.getElementById('login').classList.add('hidden');
    document.getElementById('panel').classList.remove('hidden');
    changeLang();
}
function showReg() { document.getElementById('login').classList.add('hidden'); document.getElementById('register').classList.remove('hidden'); changeLang(); }
function back() { document.getElementById('register').classList.add('hidden'); document.getElementById('login').classList.remove('hidden'); changeLang(); }
function reg() {
    const name = document.getElementById('newUser').value.trim();
    const p1 = document.getElementById('p1').value;
    const p2 = document.getElementById('p2').value;
    if (!name || !p1 || p1 !== p2) return alert(_('passNo'));
    const key = name.toLowerCase();
    if (users[key]) return alert(_('exists'));
    users[key] = { name, pass: p1, drinks: {} };
    localStorage.setItem('jl_bebidas', JSON.stringify(users));
    alert(_('created')); back();
}
function addMode() { document.getElementById('addSec').classList.remove('hidden'); document.getElementById('conSec').classList.add('hidden'); }
function conMode() { document.getElementById('conSec').classList.remove('hidden'); document.getElementById('addSec').classList.add('hidden'); conList(); }
function showOther() { document.getElementById('other').classList.remove('hidden'); }
function addO() {
    const name = document.getElementById('oName').value.trim().toLowerCase();
    const qty = +document.getElementById('oQty').value || 0;
    if (!name || qty <= 0) return;
    if (!users[cur].drinks[name]) users[cur].drinks[name] = 0;
    users[cur].drinks[name] += qty;
    save(); document.getElementById('oName').value = ''; document.getElementById('other').classList.add('hidden');
}
function addBeer() {
    const q = prompt(_('howBeer'), '6');
    if (q && +q > 0) { if (!users[cur].drinks.bier) users[cur].drinks.bier = 0; users[cur].drinks.bier += +q; save(); }
}
function save() { localStorage.setItem('jl_bebidas', JSON.stringify(users)); count(); conList(); genList(); }
function count() { document.getElementById('contador').textContent = Object.values(users[cur]?.drinks || {}).reduce((a,b)=>a+b,0); }
function conList() {
    const list = document.getElementById('list'); list.innerHTML = '';
    const drinks = users[cur]?.drinks || {};
    if (Object.keys(drinks).length === 0) { list.innerHTML = `<p>${_('noDrinks')}</p>`; return; }
    for (const [type, qty] of Object.entries(drinks)) {
        if (qty <= 0) continue;
        const pretty = type.charAt(0).toUpperCase() + type.slice(1);
        list.innerHTML += `<div class="drink"><div><strong>${pretty}</strong>: ${qty}</div>
            <div><input type="number" id="q${type}" min="1" max="${qty}" value="1" style="width:80px">
            <button class="btn-d" onclick="consume('${type}')">OK</button></div></div>`;
    }
}
function consume(type) {
    const q = +document.getElementById('q'+type).value;
    if (q > 0 && users[cur].drinks[type] >= q) {
        users[cur].drinks[type] -= q;
        if (users[cur].drinks[type] <= 0) delete users[cur].drinks[type];
        save();
    }
}
function logout() { if (confirm(_('logout') + '?')) { cur = null; document.getElementById('panel').classList.add('hidden'); document.getElementById('login').classList.remove('hidden'); document.getElementById('addSec').classList.add('hidden'); document.getElementById('conSec').classList.add('hidden'); } }
function genList() {
    const g = document.getElementById('general'); g.innerHTML = '';
    for (const k in users) {
        const u = users[k];
        const total = Object.values(u.drinks).reduce((a,b)=>a+b,0);
        let html = `<div class="card"><div style="font-size:22px;color:#ff9500;font-weight:bold">${u.name}: ${total}</div>`;
        if (Object.keys(u.drinks).length > 0) {
            html += `<table><tr><th>${_('thDrink')}</th><th>${_('thQty')}</th></tr>`;
            for (const [b,q] of Object.entries(u.drinks)) {
                const pretty = b.charAt(0).toUpperCase() + b.slice(1);
                html += `<tr><td>${pretty}</td><td>${q}</td></tr>`;
            }
            html += `</table>`;
        }
        g.innerHTML += html;
    }
}

// INICIAR
changeLang();
genList();
</script>
</body>
</html>



