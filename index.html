<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control de Bebidas</title>
    <style>
        :root {
            --primary: #00ffff;
            --bg: #121212;
            --card: #1a1a1a;
            --text: #fff;
            --accent: #00bfff;
            --danger: #dc3545;
            --success: #28a745;
            --warning: #ffc107;
        }
        body {font-family: 'Segoe UI', Arial, sans-serif; background:var(--bg); color:var(--text); margin:0; padding:15px;}
        .container {max-width:960px; margin:0 auto; background:var(--card); border-radius:20px; padding:25px; box-shadow:0 10px 40px rgba(0,255,255,0.15);}
        h1 {color:var(--primary); text-align:center; font-size:2.2em; margin:0 0 20px;}
        select {background:#333; color:white; padding:10px; border-radius:10px; border:none; font-size:16px;}
        .lang-selector {text-align:center; margin-bottom:20px;}
        .card {background:#222; padding:20px; border-radius:15px; margin:20px 0; box-shadow:0 5px 15px rgba(0,0,0,0.5);}
        input, button {padding:14px; margin:8px 0; font-size:17px; border-radius:12px; width:100%; border:none;}
        input {background:#333; color:white;}
        button {background:var(--accent); color:white; cursor:pointer; font-weight:bold;}
        button:hover {opacity:0.9; transform:scale(1.02);}
        .btn-success {background:var(--success);}
        .btn-danger {background:var(--danger);}
        .btn-warning {background:var(--warning); color:black;}
        .btn-delete {background:#8B0000; padding:8px 12px; font-size:14px;}
        .hidden {display:none;}
        #contador {font-size:80px; color:#00ff99; font-weight:bold; text-align:center; margin:20px 0;}
        .drink-item {background:#333; padding:15px; border-radius:12px; margin:10px 0; display:flex; justify-content:space-between; align-items:center;}
        .total-item {font-size:20px; font-weight:bold; color:var(--primary);}
        .admin-badge {background:#ff4444; color:white; padding:4px 10px; border-radius:20px; font-size:12px; margin-left:10px;}
        table {width:100%; border-collapse:collapse; margin-top:10px;}
        th, td {padding:12px; text-align:left; border-bottom:1px solid #444;}
        th {background:#333; color:var(--primary);}
    </style>
</head>
<body>
<div class="container">
    <h1 id="title">Control de Bebidas</h1>
    
    <div class="lang-selector">
        <select id="langSelect" onchange="changeLanguage()">
            <option value="es">Español</option>
            <option value="en">English</option>
            <option value="de">Deutsch</option>
        </select>
    </div>

    <!-- Login -->
    <div id="login" class="card">
        <h2 id="loginTitle">Iniciar Sesión</h2>
        <input type="text" id="userLogin" placeholder="Usuario">
        <input type="password" id="passLogin" placeholder="Contraseña">
        <button onclick="login()" class="btn-success" id="btnEnter">Entrar</button>
        <button onclick="showRegister()" id="btnNewUser">Nuevo Usuario</button>
        <p style="font-size:13px; color:#888; margin-top:15px;">
            Admin: Anthony | Pass: .Asking882465
        </p>
    </div>

    <!-- Registro -->
    <div id="register" class="card hidden">
        <h2 id="registerTitle">Crear Usuario</h2>
        <input type="text" id="newUser" placeholder="Nombre de usuario">
        <input type="password" id="newPass1" placeholder="Contraseña">
        <input type="password" id="newPass2" placeholder="Repetir contraseña">
        <button onclick="registerUser()" class="btn-success" id="btnCreate">Crear Cuenta</button>
        <button onclick="backToLogin()" id="btnCancel">Cancelar</button>
    </div>

    <!-- Panel Principal -->
    <div id="panel" class="hidden">
        <h2 id="welcomeMsg">Bienvenido, <span id="welcomeName"></span><span id="adminTag" class="admin-badge hidden">ADMIN</span>!</h2>
        <div style="text-align:center;">
            <h3 id="yourTotal">Tu total de bebidas:</h3>
            <div id="contador">0</div>
        </div>

        <div style="display:grid; grid-template-columns:1fr 1fr; gap:15px; margin:20px 0;">
            <button onclick="addMode()" class="btn-success" style="font-size:22px; padding:20px;" id="btnAdd">+ Agregar</button>
            <button onclick="consumeMode()" class="btn-danger" style="font-size:22px; padding:20px;" id="btnConsume">- Consumir</button>
        </div>
        <button onclick="logout()" style="width:100%;" id="btnLogout">Cerrar Sesión</button>

        <!-- Agregar -->
        <div id="addSection" class="card hidden">
            <h3 id="addTitle">¿Qué traes hoy?</h3>
            <button onclick="addBeer()" class="btn-warning" style="font-size:18px; padding:18px;" id="btnBeer">Cerveza</button>
            <button onclick="showOther()" id="btnOther">Otra bebida</button>
            <div id="otherForm" class="hidden" style="margin-top:15px;">
                <input type="text" id="otherName" placeholder="Ej: Fernet, Vodka, Vino">
                <input type="number" id="otherQty" value="1" min="1">
                <button onclick="addOther()" class="btn-success" id="btnAddOther">Agregar</button>
            </div>
        </div>

        <!-- Consumir -->
        <div id="consumeSection" class="card hidden">
            <h3 id="consumeTitle">¿Qué consumiste?</h3>
            <div id="consumeList"></div>
        </div>
    </div>

    <!-- Lista General -->
    <div class="card" style="margin-top:40px;">
        <h2 id="generalTitle">Estado General de la Fiesta</h2>
        <div id="generalList"></div>
    </div>
</div>

<script>
    const translations = { /* ... mismo objeto de traducciones que antes ... */ };
    // (lo dejo igual que en el mensaje anterior para no alargar)

    let currentLang = 'es';
    let users = JSON.parse(localStorage.getItem('bebidasDB')) || {};
    let currentUser = null;
    let isAdmin = false;

    // ADMIN CORRECTO
    const ADMIN_KEY = 'anthony';        // clave en minúsculas
    const ADMIN_PASS = '.Asking882465'; // con punto al inicio

    // Crear admin si no existe
    if (!users[ADMIN_KEY]) {
        users[ADMIN_KEY] = {
            name: 'Anthony',
            pass: ADMIN_PASS,
            drinks: {},
            isAdmin: true
        };
        localStorage.setItem('bebidasDB', JSON.stringify(users));
    }

    // El resto del código es exactamente igual que antes,
    // solo cambié las dos líneas de arriba y el texto visible del admin

    function t(key, placeholder = null) {
        let text = translations[currentLang][key] || translations.es[key] || key;
        if (placeholder !== null) text = text.replace("{0}", placeholder);
        return text;
    }

    function changeLanguage() {
        currentLang = document.getElementById('langSelect').value;
        updateAllTexts();
    }

    // === TODAS LAS FUNCIONES (login, register, add, consume, delete, etc.) ===
    // Son idénticas al mensaje anterior, solo cambié la verificación del admin:
    // isAdmin = (key === ADMIN_KEY);

    window.login = function() {
        const u = document.getElementById('userLogin').value.trim();
        const p = document.getElementById('passLogin').value;
        if (!u || !p) return alert(t('alertComplete'));
        const key = u.toLowerCase();
        if (!users[key]) return alert(t('alertWrongUser'));
        if (users[key].pass !== p) return alert(t('alertWrongPass'));
        currentUser = key;
        isAdmin = (key === ADMIN_KEY);
        document.getElementById('welcomeName').textContent = users[key].name;
        document.getElementById('adminTag').classList.toggle('hidden', !isAdmin);
        document.getElementById('login').classList.add('hidden');
        document.getElementById('panel').classList.remove('hidden');
        updateAllTexts();
        updateCounter();
        updateConsumeList();
        updateGeneral();
    };

    // === EL RESTO DEL CÓDIGO ES IGUAL QUE EN LA VERSIÓN ANTERIOR ===
    // (registerUser, addMode, consumeMode, addBeer, addOther, consume, deleteUser, updateGeneral, etc.)

    window.deleteUser = function(key) {
        if (!isAdmin || key === ADMIN_KEY) return;
        const name = users[key].name;
        if (confirm(t('alertConfirmDelete', name))) {
            delete users[key];
            saveAll();
            alert(t('alertDeleted'));
        }
    };

    // Init
    updateAllTexts();
    updateGeneral();
</script>
</body>
</html>
